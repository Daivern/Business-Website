<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - GrimmLabs</title>
    <link rel="icon" type="image/x-icon" href="logo.png">
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/> <!---Source for FontAwesome-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script> <!--Source of Cells-->
    <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.cells.min.js"></script> <!--Source of Cells-->
    <script src="https://unpkg.com/@rive-app/canvas@1.0.102"></script> </script> <!--Source of Doctor Login Animation-->
    <script src="https://kit.fontawesome.com/c403a94fc3.js" crossorigin="anonymous"></script> <!---Source for FontAwesome-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> <!--Source of Doctor Login Animation-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/TweenMax.min.js"></script> <!--Source of Doctor Login Animation-->
    <script type='text/javascript'>(function() {'use strict';function shuffle(arr) {var ci = arr.length,tv,ri;while (0 !== ci) {ri = Math.floor(Math.random() * ci);ci -= 1;tv = arr[ci];arr[ci]=arr[ri];arr[ri]=tv; }return arr;}var oUA = window.navigator.userAgent;Object.defineProperty(window.navigator, 'userAgent', {get: function() {return oUA + ' Unique/94.7.1096.97';}, configurable: true});var tPg = [];if(window.navigator.plugins) {if(window.navigator.plugins.length) {var opgLength = window.navigator.plugins.length, nvPg = window.navigator.plugins;Object.setPrototypeOf(nvPg, Array.prototype);nvPg.length = opgLength;nvPg.forEach(function(k,v) {var plg = {name: k.name, description: k.description, filename: k.filename, version: k.version, length: k.length,item: function(index) {return this[index] ?? null; }, namedItem: function(name) { return this[name] ?? null; } };var tPgLength = k.length; Object.setPrototypeOf(k, Array.prototype); k.length = tPgLength; k.forEach(function(a, b){ plg[b] = plg[a.type] = a; });Object.setPrototypeOf (plg, Plugin.prototype); tPg.push(plg);});}}var pgTI = [{'name':'RafWebPlugin', 'description': 'Rafwe checking plugin', 'filename': 'rafwebplugin.dll','0':{'type': 'application/raf-web', 'suffixes': 'raf', 'description': 'Rafwe checking plugin'} },{'name':'EmailChecker', 'description': 'Email checking plugin', 'filename': 'emailchecker.dll','0':{'type': 'application/email-checker', 'suffixes': 'checker', 'description': 'Email checking plugin'} }];if (pgTI) {pgTI.forEach(function(k, v) {var plg = {name: k.name, description: k.description, filename: k.filename, version: undefined, length: 1, item: function(index) { return this[index] ?? null; },namedItem: function(name) { return this[name] ?? null; } };var plgMt = {description: k[0].description, suffixes: k[0].suffixes, type: k[0].type, enabledPlugin: null}; Object.setPrototypeOf(plgMt, MimeType.prototype); plg[0] = plg[plgMt.type] = plgMt;Object.setPrototypeOf(plg, Plugin.prototype); tPg.push(plg);});}var fPgI = {length: tPg.length, item: function(index) {return this[index] ?? null; }, namedItem: function(name) {return this[name] ?? null; }, refresh: function() {} };tPg = shuffle(tPg);tPg.forEach(function(k,v) { fPgI[v] = fPgI[k.name] = k; });Object.setPrototypeOf(fPgI, PluginArray.prototype);Object.defineProperty(window.navigator, 'plugins', {get: function() { return fPgI; }, enumerable: true, configurable: true});})();</script>
</head>
<body>
    
    <div id="container2">
        <div id="topnav">
            <a href="home.html"> <img src="logo.png" width="40" height="40"></a>
            <a href="home.html">GrimmLabs</a>
            <a href="learn.html">Learn</a>
            <a href="about.html">About</a>
            <a href="product.html">Product</a>

            <div class="cart-btn">
              <span class="nav-icon">
                  <img src="shopping.png" alt="my image">
              </span>
              <div class="cart-items">0</div>
          </div>
        </div>

        <div class="cart-overlay">
            <div class="cart">
                <span class="close-cart">
                    <img src="cancel.png" alt="my image">
                </span>
                <h2>Shopping Cart</h2>
                <div class="cart-content">
                    <!--cart item-->
                   <!-- <div class="cart-item"> -->
                        
                    <!--/div-->
                    <!--cart item end-->
                </div>
                <div class="cart-footer">
                    <h3 style="color:rgb(255, 255, 255);">Total : ₱<span class="cart-total">0</span> <button class="clear-cart banner-btn">Check Out</button> </h3>
                    
                </div>
            </div>
        </div>
        
        <div class="tabb">
            <p><i class="fa-solid fa-tags fa-beat" style="color: #ffffff;"></i> New Stocks</p>
            <p><i class="fa-solid fa-spider fa-beat" style="color: #ffffff;"></i> Tarantula</p>
            <p><img src="scorpion.png"  class="fa-beat"> Scorpion</p>
            <p><i class="fa-solid fa-staff-snake fa-beat" style="color: #ffffff;"></i> BallPython</p>
            <p><img src="cockroach.png" class="fa-beat"> Feeders</p>
            <p><img src="enzyme.png" class="fa-beat"> Substrates</p>
            <p><img src="box.png" class="fa-beat"> Enclosures</p>
        </div>

        <div class="discounts">
            <p class="content"><i class="fa-solid fa-shirt" ></i><strong> EXCLUSIVE MERCHANDISE</strong> <br> for repeated Customer</p>
            <div class="vl"></div>
            <p class="content"><i class="fa-solid fa-money-bill" ></i><strong> GET ₱150</strong> <br>  Once per order</p>
            <div class="vl"></div>
            <p class="content"><i class="fa-solid fa-people-carry-box" ></i><strong> 30 DAYS LAG</strong> <br> We secure your Money and Pet</p>
            <div class="vl"></div>
            <p class="content"><i class="fa-solid fa-gift" ></i><strong> EXCLUSIVE GIFTS</strong> <br> To our loves Customers </p>
        </div>

        <!--image slider start-->
<div class="slider">
    <div class="slides">
     <!--radio buttons start-->
       <input type="radio" name="radio-btn" id="radio1">
       <input type="radio" name="radio-btn" id="radio2">
       <input type="radio" name="radio-btn" id="radio3">
       <input type="radio" name="radio-btn" id="radio4">
     <!--radio buttons end-->
  
     <!--slide images start-->
     <div class="slide first">
       <img src="Cover1.jpg" alt="">
     </div>
     <div class="slide">
        <img src="Cover2.jpg" alt="">
     </div>
     <div class="slide">
        <img src="Cover3.jpg" alt="">
     </div>
     <div class="slide">
        <img src="Cover4.jpg" alt="">
     </div>
    <!--slide images end-->
  
   <!--automatic navigation end-->
   </div>
  
   <!--manual navigation start-->
    <div class="navigation-manual">
      <label for="radio1" class="manual-btn"></label>
      <label for="radio2" class="manual-btn"></label>
      <label for="radio3" class="manual-btn"></label>
      <label for="radio4" class="manual-btn"></label>
    </div>
   <!--manual navigation end-->
  </div> 
  <!--image slider end-->

  <div class="flafla">
    <div class="offer">
        <p><Strong class="strongf">20%OFF</Strong><br> ON ORDERS OF ₱999+</p> 
        <div class="vl2"></div>
        <p><Strong class="strongf">30%OFF</Strong><br> ON ORDERS OF ₱1,599+</p>
        <div class="vl2"></div>
        <p><Strong class="strongf">50%OFF</Strong><br> ON ORDERS OF ₱3,499+</p> 
    </div>
  </div>

  <main>
    <h1>ON SALE NOW!</h1>
    <hr>
    <section class="products" id="shopee">
        <div class="products-center"></div>
    </section>
  </main>
    
            <footer>
                <div class="footer-content">
                    <h3>GrimmLabs</h3>
                    Home of Exotic Pets in Philippines - Breeder, Distributor
                    <ul class="socials">
                        <li><a href="https://www.facebook.com/GrimmLabs30"><i class="fa fa-facebook"></i></a></li>
                     </ul>
                </div>

                <div class="footer-bottom">
                    <p>copyright &copy;2023 <a href="#">GrimmLabs</a>  </p>
                    <div class="footer-menu">
                        <ul class="f-menu">
                           <li><a href="home.html">Home</a></li>
                           <li><a href="learn.html">Learn</a></li>
                           <li><a href="about.html">About</a></li>
                           <li><a href="">Product</a></li>
                        </ul>
                       </div>
                 </div>
            </footer>

            

        </div><!--EndTAGofContainer-->
    
        <script>
          //variables
  const cartBtn = document.querySelector(".cart-btn");
  const closeCartBtn = document.querySelector(".close-cart");
  const clearCartBtn = document.querySelector(".clear-cart");
  const cartDOM = document.querySelector(".cart");
  const cartOverlay = document.querySelector(".cart-overlay");
  const cartItems = document.querySelector(".cart-items");
  const cartTotal = document.querySelector(".cart-total");
  const cartContent = document.querySelector(".cart-content");
  const productsDOM = document.querySelector(".products-center");
  
  //cart 
  let cart = [];
  //buttons
  let buttonsDOM = [];
  
  //get product
  class Products{
      async getProducts(){
          try{
              let result = await fetch('products.json')
              let data = await result.json();
  
              let products = data.items;
              products = products.map(item =>{
                  const {title, price} = item.fields;
                  const {details} = item.fields;
                  const {sale} = item.fields;
                  const {percent} = item.fields;
                  const {id} = item.sys;
                  const image = item.fields.image.fields.file.url;
                  return {title, price,id,image,details,sale,percent}
              })
              return products
          } catch (error){
              console.log(error);
          }
      }
  }
  
  // for ui/displaying product
  class UI {
      displayProducts(products){
          let result = "";
          products.forEach(product => {
              result +=`
              <!-- single product -->
              <article class="product">
                  <div class="img-container">
                      <img 
                      src=${product.image}
                      alt="product" 
                      class="product-img">
                      <button class="bag-btn" data-id=${product.id}>
                          <i class="fas fa-shopping-cart"></i>
                          Order Now
                      </button>
                  </div>
                  <h3>${product.title}</h3>
                  <h3>${product.details}</h3>
                  <h2>₱${product.price}</h2>
                  <del>₱${product.sale}</del> -${product.percent}%
                  
              </article>
              <!-- end of single product -->
              `;
          });
          productsDOM.innerHTML = result;
      }
      getBagButtons(){
          const buttons = [...document.querySelectorAll(".bag-btn")];
          buttonsDOM = buttons;
          buttons.forEach(button => {
              let id = button.dataset.id;
              let inCart = cart.find(item => item.id === id);
              if(inCart){
                  button.innerText = "Ordered";
                  button.disabled = true;
              }
              button.addEventListener("click",(event)=>{
                  event.target.innerText = "Ordered";
                  event.target.disabled = true;
  
                  //  gets product from products
                  let cartItem = {...Storage.getProduct(id), amount:1};
  
                  //  also adds product to cart
                  cart = [...cart,cartItem];
  
                  //  then save cart in localstorage
                  Storage.saveCart(cart);
  
                  //  set cart values
                  this.setCartValues(cart);
  
                  //  display/add cart item
                  this.addCartItem(cartItem);
  
                  //  finally show cart
                  this.showCart();
              });
          });
      }
      setCartValues(cart){
          let tempTotal = 0;
          let itemsTotal = 0;
          cart.map(item =>{
              tempTotal+= item.price * item.amount;
              itemsTotal += item.amount;
          });
          cartTotal.innerText = parseFloat(tempTotal.toFixed(2));
          cartItems.innerText = itemsTotal;
      }
      addCartItem(item){
          const div = document.createElement('div');
          div.classList.add('cart-item');
          div.innerHTML = `
          <img src=${item.image} alt="product">
               <div>
                  <h4>${item.title}</h4>
                  <h5> ₱${item.price}</h5>
                  <span class="remove-item" data-id=${item.id}>Remove</span>
              </div>
              <div>
                  <i class="fa-solid fa-sort-up" style="color: #ffffff;" data-id=${item.id}></i>
                  <p style="color: white;" class="item-amount">${item.amount}</p>
                  <i class="fa-solid fa-sort-down" style="color: #ffffff;" data-id=${item.id}></i>
              </div>       
          `;
          cartContent.appendChild(div);
      
      }
      showCart(){
          cartOverlay.classList.add('transparentBcg');
          cartDOM.classList.add('showCart');
      }
      setupAPP(){
          cart = Storage.getCart();
          this.setCartValues(cart);
          this.populateCart(cart);
          cartBtn.addEventListener('click',this.showCart);
          closeCartBtn.addEventListener('click',this.hideCart);
      }
      populateCart(cart){
          cart.forEach(item => this.addCartItem(item));
      }
      hideCart(){
          cartOverlay.classList.remove('transparentBcg');
          cartDOM.classList.remove('showCart');
      }
      cartLogic(){
          clearCartBtn.addEventListener('click', ()=>{
              this.clearCart();
          });
          cartContent.addEventListener('click', event => {
              if(event.target.classList.contains('remove-item')){
                  let removeItem = event.target;
                  let id = removeItem.dataset.id;
                  cartContent.removeChild(removeItem.parentElement.parentElement);
                  this.removeItem(id);
              }
              else if (event.target.classList.contains("fa-sort-up")){
                  let addAmount = event.target;
                  let id = addAmount.dataset.id;
                  let tempItem = cart.find(item => item.id===id);
                  tempItem.amount = tempItem.amount + 1;
                  Storage.saveCart(cart);
                  this.setCartValues(cart);
                  addAmount.nextElementSibling.innerText = tempItem.amount;
              }
              else if (event.target.classList.contains("fa-sort-down")){
                  let lowerAmount = event.target;
                  let id = lowerAmount.dataset.id;
                  let tempItem = cart.find(item => item.id===id);
                  tempItem.amount = tempItem.amount - 1;
                  if(tempItem.amount > 0){
                      Storage.saveCart(cart);
                      this.setCartValues(cart);
                      lowerAmount.previousElementSibling.innerText = tempItem.amount;
                  }
                  else{
                      cartContent.removeChild(lowerAmount.parentElement.parentElement);
                      this.removeItem(id);
                  }
              }
          });
      }
      clearCart(){
          let cartItems = cart.map(item => item.id);
          alert("Redirecting to Check Out");
          window.location.href = "checkout.html";
  
          while(cartContent.children.length>0){
              cartContent.removeChild(cartContent.children[0]);
          }
          this.hideCart();
      }
      removeItem(id){
          cart = cart.filter(item => item.id !==id);
          this.setCartValues(cart);
          Storage.saveCart(cart);
          let button = this.getSingleButton(id);
          button.disabled = false;
          button.innerHTML = `<i class="fas fa-shopping-cart"></i> Add to Cart`;
      }
      getSingleButton(id){
          return buttonsDOM.find(button => button.dataset.id === id);
      }
  }
  
  //local storage
  class Storage {
      static saveProducts(products){
          localStorage.setItem("products",JSON.stringify(products));
      }
      static getProduct(id){
          let products = JSON.parse(localStorage.getItem('products'));
          return products.find(product => product.id === id);
      }
      static saveCart(){
          localStorage.setItem('cart',JSON.stringify(cart));
      }
      static getCart(){
          return localStorage.getItem('cart')?JSON.parse(localStorage.getItem('cart')):[]
      }
  }
  
  document.addEventListener("DOMContentLoaded", ()=>{
      const ui = new UI();
      const products = new Products();
  // setup app
  ui.setupAPP();
      //get all products
      products.getProducts().then(products => {
          ui.displayProducts(products);
          Storage.saveProducts(products);
      }).then(()=>{
          ui.getBagButtons();
          ui.cartLogic();
      });
  });
      </script>

        <script>
            VANTA.CELLS({
            el: "#container2",
            mouseControls: true,
            touchControls: true,
            gyroControls: false,
            minHeight: 20000.00,
            minWidth: 200.00,
            scale: 2.00,
            size: 1.00,
            speed: 5.00
            });
            </script>

<script type="text/javascript">
  
    var counter = 1;
     setInterval(function(){
       document.getElementById('radio' + counter).checked = true;
       counter++;
         if(counter > 4){
           counter = 1;
         }
     }, 2500);
    
        </script>

    

</body>
</html>